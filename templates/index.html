<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Predittore Performance Studente</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="container">
        <h1>Predittore delle Performance degli Studenti ðŸŽ“</h1>
        Riga CSV: <input type="text" id="csvInput" style="width:100%;" placeholder="Inserisci la riga CSV separata da virgole"><br>
<button id="loadCSV">Carica CSV</button>
        <form id="studentForm">
            EtÃ : <input type="number" id="Age" value="16"><br>
            Genere:
            <select id="Gender">
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
            </select><br>
            Classe:
            <select id="Grade_Level">
                <option>9th</option>
                <option>10th</option>
                <option>11th</option>
                <option>12th</option>
            </select><br>
            Strength Score: <input type="number" id="Strength_Score" value="50" step="any"><br>
            Endurance Score: <input type="number" id="Endurance_Score" value="50" step="any"><br>
            Flexibility Score: <input type="number" id="Flexibility_Score" value="50" step="any"><br>
            Speed & Agility Score: <input type="number" id="Speed_Agility_Score" value="50" step="any"><br>
            BMI: <input type="number" id="BMI" value="20" step="any"><br>
            Health & Fitness Knowledge Score: <input type="number" id="Health_Fitness_Knowledge_Score" value="50"
                step="any"><br>
            Skills Score: <input type="number" id="Skills_Score" value="50" step="any"><br>
            Class Participation Level:
            <select id="Class_Participation_Level">
                <option>Low</option>
                <option>Medium</option>
                <option>High</option>
            </select><br>
            Attendance Rate: <input type="number" id="Attendance_Rate" value="80" step="any"><br>
            Motivation Level:
            <select id="Motivation_Level">
                <option>Low</option>
                <option>Medium</option>
                <option>High</option>
            </select><br>
            Overall PE Performance Score: <input type="number" id="Overall_PE_Performance_Score" value="50"
                step="any"><br>
            Improvement Rate: <input type="number" id="Improvement_Rate" value="3" step="any"><br>
            Final Grade:
            <select id="Final_Grade">
                <option>A</option>
                <option>B</option>
                <option>C</option>
                <option>D</option>
                <option>F</option>
            </select><br>
            Previous Semester PE Grade:
            <select id="Previous_Semester_PE_Grade">
                <option>A</option>
                <option>B</option>
                <option>C</option>
                <option>D</option>
                <option>F</option>
            </select><br>
            Hours Physical Activity per Week: <input type="number" id="Hours_Physical_Activity_Per_Week" value="5"
                step="any"><br>
            <button type="submit">Predici Performance</button>
        </form>
        <h2 id="result"></h2>
    </div>

    <script>
        const form = document.getElementById('studentForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {};
            for (let el of form.elements) {
                if (el.id) data[el.id] = el.value;
            }
            const res = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await res.json();
            document.getElementById('result').innerText = "Performance prevista: " + result.performance;
        });



        const csvInput = document.getElementById("csvInput");
    const loadBtn = document.getElementById("loadCSV");

    loadBtn.addEventListener("click", (e) => {
        e.preventDefault();
        const csv = csvInput.value.split(",");
        if(csv.length !== 18){
            alert("Numero di valori non corretto! Ci vogliono 18 valori.");
            return;
        }
        // Mappa valori ai campi
        document.getElementById("Age").value = csv[0];
        document.getElementById("Gender").value = csv[1];
        document.getElementById("Grade_Level").value = csv[2];
        document.getElementById("Strength_Score").value = csv[3];
        document.getElementById("Endurance_Score").value = csv[4];
        document.getElementById("Flexibility_Score").value = csv[5];
        document.getElementById("Speed_Agility_Score").value = csv[6];
        document.getElementById("BMI").value = csv[7];
        document.getElementById("Health_Fitness_Knowledge_Score").value = csv[8];
        document.getElementById("Skills_Score").value = csv[9];
        document.getElementById("Class_Participation_Level").value = csv[10];
        document.getElementById("Attendance_Rate").value = csv[11];
        document.getElementById("Motivation_Level").value = csv[12];
        document.getElementById("Overall_PE_Performance_Score").value = csv[13];
        document.getElementById("Improvement_Rate").value = csv[14];
        document.getElementById("Final_Grade").value = csv[15];
        document.getElementById("Previous_Semester_PE_Grade").value = csv[16];
        document.getElementById("Hours_Physical_Activity_Per_Week").value = csv[17];
    });
    </script>
</body>

</html>